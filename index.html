<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://unpkg.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https://api.kraken.com wss://ws.kraken.com https://api.alternative.me https://api.coingecko.com https://gamma-api.polymarket.com https://data.messari.io https://quote-api.jup.ag https://api.mainnet-beta.solana.com; child-src https://twitter.com https://www.facebook.com https://t.me https://github.com">
<meta http-equiv="X-Content-Type-Options" content="nosniff">
<meta name="referrer" content="no-referrer">
<title>INCENTIVES â€” Crypto Trading Game</title>
<link rel="stylesheet" href="styles.css">
<script src="https://unpkg.com/lightweight-charts@4.1.1/dist/lightweight-charts.standalone.production.js"></script>
<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
<script>
// Load theme before render to prevent flash
(function(){
  var s=JSON.parse(localStorage.getItem('incentives-settings')||'{}');
  var t=s.theme||'dark';
  document.documentElement.className='theme-'+t;
})();
</script>
</head>
<body>

<!-- TOP BAR -->
<header id="top-bar">
  <div class="top-left">
    <div class="logo"><img src="logo.jpg" alt="Incentives" class="logo-img"> INCENTIVES</div>
    <select id="market-selector">
      <optgroup label="ğŸª™ CRYPTO">
        <option value="XETHZUSD" selected>âŸ  ETH / USD</option>
        <option value="XXBTZUSD">â‚¿ BTC / USD</option>
        <option value="SOLUSD">â— SOL / USD</option>
        <option value="XDGUSD">Ã DOGE / USD</option>
        <option value="XXRPZUSD">âœ• XRP / USD</option>
        <option value="ADAUSD">â‚³ ADA / USD</option>
        <option value="AVAXUSD">ğŸ”º AVAX / USD</option>
        <option value="LINKUSD">â¬¡ LINK / USD</option>
      </optgroup>
      <optgroup label="ğŸ“ˆ STOCKS">
        <option value="SIM_AAPL">ğŸ AAPL / USD</option>
        <option value="SIM_TSLA">âš¡ TSLA / USD</option>
        <option value="SIM_NVDA">ğŸŸ¢ NVDA / USD</option>
        <option value="SIM_MSFT">ğŸªŸ MSFT / USD</option>
        <option value="SIM_GOOGL">ğŸ” GOOGL / USD</option>
        <option value="SIM_AMZN">ğŸ“¦ AMZN / USD</option>
        <option value="SIM_META">â“‚ï¸ META / USD</option>
        <option value="SIM_AMD">ğŸ”´ AMD / USD</option>
        <option value="SIM_INTC">ğŸ”µ INTC / USD</option>
        <option value="SIM_NFLX">ğŸ¬ NFLX / USD</option>
      </optgroup>
      <optgroup label="ğŸ›¢ï¸ OIL &amp; GAS">
        <option value="SIM_WTI">ğŸ›¢ï¸ WTI Crude / USD</option>
        <option value="SIM_NATGAS">ğŸ”¥ Natural Gas / USD</option>
        <option value="SIM_BRENT">ğŸ›¢ï¸ Brent Oil / USD</option>
        <option value="SIM_XOM">â›½ XOM / USD</option>
        <option value="SIM_CVX">â›½ CVX / USD</option>
        <option value="SIM_OXY">â›½ OXY / USD</option>
      </optgroup>
      <optgroup label="ğŸ’ INCENTIVES">
        <option value="SIM_INCENTIVES">ğŸ’ INCENTIVES / USD</option>
      </optgroup>
    </select>
    <span id="market-hours-note" class="hidden">ğŸ• Market Hours (24/7 in-game)</span>
  </div>
  <div class="top-center">
    <button id="challenge-btn">ğŸ¤– CHALLENGE THE BOT</button>
  </div>
  <div class="top-right">
    <!-- INCENTIVES Balance -->
    <div id="incentives-balance" class="incentives-bal" onclick="TokenEconomy.toggleTransactions()">
      <span class="incv-icon">ğŸ’</span>
      <span id="incv-amount" class="mono">500</span>
      <span class="incv-label">INCENTIVES</span>
    </div>
    <!-- Trophy / Achievements -->
    <button id="trophy-btn" class="top-icon-btn" title="Achievements" onclick="TokenEconomy.toggleAchievements()">ğŸ†</button>
    <!-- Shop -->
    <button id="shop-btn" class="top-icon-btn" title="Shop" onclick="TokenEconomy.toggleShop()">ğŸ›’</button>
    <!-- Wallet -->
    <div id="wallet-area">
      <button id="connect-wallet-btn" onclick="TokenEconomy.toggleWallet()">ğŸ”— Connect Wallet</button>
      <div id="wallet-connected" class="hidden" onclick="TokenEconomy.toggleWalletDropdown()">
        <span id="wallet-addr-short" class="mono"></span>
        <span class="incv-icon">ğŸ’</span>
        <span id="wallet-bal" class="mono"></span>
      </div>
      <!-- Wallet Dropdown -->
      <div id="wallet-dropdown" class="hidden">
        <div class="wd-row"><span class="wd-label">Address</span><span id="wd-full-addr" class="mono"></span></div>
        <div class="wd-row"><span class="wd-label">INCENTIVES</span><span id="wd-incv-bal" class="mono"></span></div>
        <div class="wd-row wd-link" onclick="TokenEconomy.toggleTransactions()">ğŸ“œ Transaction History</div>
        <div class="wd-row wd-link wd-disconnect" onclick="TokenEconomy.disconnectWallet()">ğŸ”Œ Disconnect</div>
      </div>
    </div>
    <button id="theme-cycle-btn" title="Switch Theme" onclick="cycleTheme()">ğŸŒ™</button>
    <button id="share-btn" class="top-icon-btn" title="Share" onclick="openShareModal('general')">ğŸ“¤</button>
    <button id="help-btn" class="top-icon-btn" title="Help Center" onclick="toggleHelpCenter()">â“</button>
    <button id="settings-btn" title="Settings">âš™ï¸</button>
    <div class="account-stats">
      <div class="stat"><span class="label">Balance</span><span id="balance" class="mono">$10,000.00</span></div>
      <div class="stat"><span class="label">Portfolio</span><span id="portfolio" class="mono">$10,000.00</span></div>
      <div class="stat"><span class="label">P/L</span><span id="pnl" class="mono pnl-zero">$0.00</span></div>
    </div>
    <!-- Radio moved to floating button -->
  </div>
</header>

<!-- SETTINGS MODAL -->
<div id="settings-overlay" class="hidden" onclick="closeSettings()">
  <div id="settings-panel" onclick="event.stopPropagation()">
    <div class="settings-header">
      <h2>âš™ï¸ Settings</h2>
      <button class="settings-close" onclick="closeSettings()">âœ•</button>
    </div>
    <div class="settings-body">

      <div class="settings-section">
        <h3>ğŸ¨ Appearance</h3>
        <div class="setting-row">
          <label>Theme</label>
          <select id="set-theme">
            <option value="dark">ğŸŒ™ Dark</option>
            <option value="light">â˜€ï¸ Light</option>
            <option value="telegram">ğŸ’ Telegram Blue</option>
          </select>
        </div>
        <div class="setting-row">
          <label>Font Size</label>
          <select id="set-fontsize">
            <option value="small">Small</option>
            <option value="medium" selected>Medium</option>
            <option value="large">Large</option>
          </select>
        </div>
      </div>

      <div class="settings-section">
        <h3>ğŸ“Š Chart</h3>
        <div class="setting-row">
          <label>Chart Type</label>
          <select id="set-charttype">
            <option value="candlestick">Candlestick</option>
            <option value="line">Line</option>
            <option value="area">Area</option>
          </select>
        </div>
        <div class="setting-row">
          <label>Default Timeframe</label>
          <select id="set-timeframe">
            <option value="1">1m</option>
            <option value="5">5m</option>
            <option value="15" selected>15m</option>
            <option value="60">1h</option>
            <option value="240">4h</option>
            <option value="1440">1D</option>
          </select>
        </div>
      </div>

      <div class="settings-section">
        <h3>ğŸ”” Notifications & Sound</h3>
        <div class="setting-row">
          <label>Sound Effects</label>
          <div class="toggle-switch" data-setting="soundEffects"><div class="toggle-knob"></div></div>
        </div>
        <div class="setting-row">
          <label>Notifications</label>
          <div class="toggle-switch" data-setting="notifications"><div class="toggle-knob"></div></div>
        </div>
        <div class="setting-row">
          <label>Radio Auto-play</label>
          <div class="toggle-switch" data-setting="radioAutoplay"><div class="toggle-knob"></div></div>
        </div>
        <div class="setting-row">
          <label>AI Mentor Voice</label>
          <div class="toggle-switch" data-setting="mentorVoice"><div class="toggle-knob"></div></div>
        </div>
      </div>

      <div class="settings-section">
        <h3>ğŸ’± Trading</h3>
        <div class="setting-row">
          <label>Trade Confirmations</label>
          <div class="toggle-switch active" data-setting="tradeConfirm"><div class="toggle-knob"></div></div>
        </div>
        <div class="setting-row">
          <label>Currency Display</label>
          <select id="set-currency">
            <option value="USD">USD ($)</option>
            <option value="EUR">EUR (â‚¬)</option>
            <option value="GBP">GBP (Â£)</option>
          </select>
        </div>
      </div>

      <div class="settings-section">
        <h3>ğŸŒ Language</h3>
        <div class="setting-row">
          <label>Language</label>
          <select id="set-language">
            <option value="en">English</option>
          </select>
        </div>
      </div>

      <div class="settings-section">
        <h3>âŒ¨ï¸ Hotkeys</h3>
        <div class="hotkeys-list">
          <div class="hotkey-item"><kbd>B</kbd> Buy</div>
          <div class="hotkey-item"><kbd>S</kbd> Sell</div>
          <div class="hotkey-item"><kbd>Enter</kbd> Place Order</div>
          <div class="hotkey-item"><kbd>1-6</kbd> Timeframes</div>
          <div class="hotkey-item"><kbd>Esc</kbd> Close Modal</div>
        </div>
      </div>

      <div class="settings-section">
        <h3>ğŸ”„ Reset</h3>
        <button class="reset-btn" onclick="resetBalance()">Reset Balance to $10,000</button>
      </div>

    </div>
  </div>
</div>

<!-- MAIN CONTENT -->
<main id="app">
  <!-- CHART -->
  <section id="chart-section">
    <div id="timeframe-bar">
      <button class="tf-btn" data-tf="1">1m</button>
      <button class="tf-btn" data-tf="5">5m</button>
      <button class="tf-btn active" data-tf="15">15m</button>
      <button class="tf-btn" data-tf="60">1h</button>
      <button class="tf-btn" data-tf="240">4h</button>
      <button class="tf-btn" data-tf="1440">1D</button>
      <span id="live-price" class="mono"></span>
    </div>
    <div id="chart-container"></div>
  </section>

  <!-- RIGHT PANEL -->
  <aside id="right-panel">
    <!-- ORDER PANEL -->
    <div id="order-panel" class="panel">
      <div class="panel-title">Place Order</div>
      <div id="side-toggle">
        <button id="buy-btn" class="side-btn active-buy">BUY</button>
        <button id="sell-btn" class="side-btn">SELL</button>
      </div>
      <div id="order-type-bar">
        <button class="ot-btn active" data-type="market">Market</button>
        <button class="ot-btn" data-type="limit">Limit</button>
        <button class="ot-btn" data-type="stop">Stop-Loss</button>
      </div>
      <div id="limit-price-row" class="hidden">
        <label>Price (USD)</label>
        <input type="number" id="limit-price" placeholder="0.00" step="0.01">
      </div>
      <div class="input-group">
        <label>Amount (USD)</label>
        <input type="number" id="order-usd" placeholder="0.00" step="0.01">
      </div>
      <div class="input-group">
        <label id="order-asset-label">Amount (ETH)</label>
        <input type="number" id="order-eth" placeholder="0.0000" step="0.0001">
      </div>
      <div id="pct-buttons">
        <button class="pct-btn" data-pct="25">25%</button>
        <button class="pct-btn" data-pct="50">50%</button>
        <button class="pct-btn" data-pct="75">75%</button>
        <button class="pct-btn" data-pct="100">100%</button>
      </div>
      <div class="input-group leverage-group">
        <label>Leverage: <span id="lev-val">1x</span> <span class="disabled-tag">Coming Soon</span></label>
        <input type="range" min="1" max="10" value="1" id="leverage" disabled>
      </div>
      <div id="fee-display" class="mono">Est. fee: $0.00</div>
      <button id="place-order" class="primary-btn buy-color">BUY ETH</button>
    </div>

    <!-- BOTS PANEL -->
    <div id="bots-panel" class="panel">
      <div class="panel-title">Trading Bots</div>
      <div id="bot-tabs">
        <button class="bot-tab active" data-bot="grid">Grid Bot</button>
        <button class="bot-tab" data-bot="dca">DCA Bot</button>
        <button class="bot-tab" data-bot="custom">Custom</button>
        <button class="bot-tab" data-bot="active">Active</button>
      </div>
      <div id="bot-grid" class="bot-form">
        <div class="input-group"><label>Upper Price</label><input type="number" id="grid-upper" placeholder="0.00"></div>
        <div class="input-group"><label>Lower Price</label><input type="number" id="grid-lower" placeholder="0.00"></div>
        <div class="input-group"><label>Grid Count</label><input type="number" id="grid-count" value="10" min="2" max="100"></div>
        <div class="input-group"><label>Investment (USD)</label><input type="number" id="grid-invest" placeholder="0.00"></div>
        <button class="primary-btn" id="start-grid" style="background:var(--accent);color:#fff">Start Grid Bot</button>
      </div>
      <div id="bot-dca" class="bot-form hidden">
        <div class="input-group"><label>Interval</label>
          <select id="dca-interval"><option value="60">1 min</option><option value="300">5 min</option><option value="900">15 min</option><option value="3600">1 hour</option></select>
        </div>
        <div class="input-group"><label>Amount per Buy (USD)</label><input type="number" id="dca-amount" placeholder="0.00"></div>
        <button class="primary-btn" id="start-dca">Start DCA Bot</button>
      </div>
      <div id="bot-custom" class="bot-form hidden">
        <div class="input-group"><label>Strategy Name</label><input type="text" id="custom-name" placeholder="My Strategy"></div>
        <div class="input-group"><label>Timeframe</label>
          <select id="custom-tf"><option value="1m">1 min</option><option value="5m">5 min</option><option value="15m">15 min</option><option value="1h">1 hour</option><option value="4h">4 hour</option><option value="1d">1 day</option></select>
        </div>
        <div class="input-group"><label>Entry Indicator</label>
          <select id="custom-entry-ind"><option value="RSI">RSI</option><option value="SMA_CROSS">SMA Cross</option><option value="MACD_CROSS">MACD Cross</option><option value="BOLLINGER">Bollinger Band</option><option value="PRICE_CHANGE">Price Change %</option></select>
        </div>
        <div class="input-group"><label>Entry Condition</label>
          <select id="custom-entry-cond"><option value="below">Below</option><option value="above">Above</option><option value="crosses_above">Crosses Above</option><option value="crosses_below">Crosses Below</option></select>
        </div>
        <div class="input-group"><label>Entry Value</label><input type="number" id="custom-entry-val" value="30" step="0.1"></div>
        <div class="input-group"><label>Exit Indicator</label>
          <select id="custom-exit-ind"><option value="RSI">RSI</option><option value="SMA_CROSS">SMA Cross</option><option value="MACD_CROSS">MACD Cross</option><option value="BOLLINGER">Bollinger Band</option><option value="PRICE_CHANGE">Price Change %</option></select>
        </div>
        <div class="input-group"><label>Exit Condition</label>
          <select id="custom-exit-cond"><option value="above">Above</option><option value="below">Below</option><option value="crosses_above">Crosses Above</option><option value="crosses_below">Crosses Below</option></select>
        </div>
        <div class="input-group"><label>Exit Value</label><input type="number" id="custom-exit-val" value="70" step="0.1"></div>
        <div class="input-group"><label>Stop Loss %</label><input type="number" id="custom-sl" value="1" step="0.1" min="0.1" max="10"></div>
        <div class="input-group"><label>Take Profit %</label><input type="number" id="custom-tp" value="2" step="0.1" min="0.1" max="20"></div>
        <div class="input-group"><label>Position Size %</label><input type="number" id="custom-size" value="5" step="1" min="1" max="50"></div>
        <button class="primary-btn" id="start-custom">Start Custom Bot</button>
      </div>
      <div id="bot-active" class="bot-form hidden">
        <div id="active-bots-list"><p class="muted">No active bots</p></div>
      </div>
    </div>
  </aside>
</main>

<!-- BOTTOM SECTION -->
<section id="bottom-section">
  <div id="history-panel">
    <div id="history-tabs">
      <button class="h-tab active" data-htab="open">Open Orders</button>
      <button class="h-tab" data-htab="history">Trade History</button>
      <button class="h-tab" data-htab="bottrades">Bot Trades</button>
    </div>
    <div id="history-content">
      <table id="history-table">
        <thead><tr><th>Time</th><th>Pair</th><th>Type</th><th>Price</th><th>Amount</th><th>Total</th><th>Status</th><th></th></tr></thead>
        <tbody id="history-body"></tbody>
      </table>
      <p id="no-orders" class="muted">No orders yet</p>
    </div>
  </div>

  <!-- AI MENTOR - NOVA -->
  <div id="ai-mentor">
    <div id="mentor-header" onclick="toggleMentor()">
      <span class="mentor-header-left">
        <span class="nova-avatar">ğŸ¤–</span>
        <span class="nova-name">Nova</span>
        <span class="nova-status">AI Mentor</span>
      </span>
      <span id="mentor-toggle">â–²</span>
    </div>
    <div id="mentor-body">
      <div id="mentor-messages">
        <!-- Messages populated by JS -->
      </div>
      <div id="mentor-typing" class="hidden">
        <span class="nova-avatar-sm">ğŸ¤–</span>
        <div class="typing-indicator"><span></span><span></span><span></span></div>
      </div>
      <div id="mentor-quick-replies">
        <button class="quick-reply-btn" data-query="market-analysis">ğŸ“Š Market Analysis</button>
        <button class="quick-reply-btn" data-query="trading-tips">ğŸ’¡ Trading Tips</button>
        <button class="quick-reply-btn" data-query="explain-pl">ğŸ“ˆ Explain My P/L</button>
        <button class="quick-reply-btn" data-query="whats-hot">ğŸ”¥ What's Hot?</button>
      </div>
      <div id="mentor-input-row">
        <input type="text" id="mentor-input" placeholder="Ask Nova anything about trading...">
        <button id="mentor-send" class="sm-btn" title="Send">â¤</button>
        <button id="mentor-voice" class="sm-btn" title="Voice (coming soon)">ğŸ™</button>
      </div>
    </div>
  </div>
</section>

<!-- CHALLENGE SETUP MODAL -->
<div id="challenge-overlay" class="hidden">
  <div class="challenge-modal" onclick="event.stopPropagation()">
    <h2>ğŸ¤– Challenge the Bot</h2>
    <p>Compete head-to-head against an AI trading bot!</p>
    <div class="cm-field">
      <label>Asset to Trade</label>
      <select id="cm-asset"></select>
    </div>
    <div class="cm-field">
      <label>Match Duration</label>
      <div class="cm-duration-btns">
        <button class="cm-dur" data-dur="300">5 min</button>
        <button class="cm-dur active" data-dur="900">15 min</button>
        <button class="cm-dur" data-dur="1800">30 min</button>
        <button class="cm-dur" data-dur="3600">1 hour</button>
      </div>
    </div>
    <div class="cm-field">
      <label>Starting Balance: $10,000 each</label>
    </div>
    <div class="cm-field">
      <label>Difficulty</label>
      <div class="cm-diff-btns">
        <button class="cm-diff" data-diff="easy">ğŸŸ¢ Easy</button>
        <button class="cm-diff active" data-diff="medium">ğŸŸ¡ Medium</button>
        <button class="cm-diff" data-diff="hard">ğŸ”´ Hard</button>
      </div>
    </div>
    <div class="cm-diff-desc" id="cm-diff-desc">Bot uses grid + dip strategies, trades every 15-30s</div>
    <button class="primary-btn cm-start" id="cm-start-btn" style="background:var(--accent);margin-top:16px">âš”ï¸ START MATCH</button>
    <button class="cm-cancel" onclick="closeChallengeModal()">Cancel</button>
  </div>
</div>

<!-- BOT VS PLAYER GAME VIEW -->
<div id="game-view" class="hidden">
  <!-- TOP SCOREBOARD -->
  <div id="game-scorebar">
    <div class="gs-player gs-left">
      <span class="gs-label">ğŸ‘¤ YOU</span>
      <span class="gs-value" id="gs-player-val">$10,000.00</span>
      <span class="gs-trades" id="gs-player-trades">0 trades</span>
      <span class="gs-bots-val">ğŸ¤– Bots: <span id="gs-player-bots-val" class="mono">$0.00</span></span>
    </div>
    <div class="gs-center">
      <div class="gs-asset" id="gs-asset-name">âŸ  ETH/USD</div>
      <div class="gs-price" id="gs-live-price">$0.00</div>
      <div class="gs-timer" id="gs-timer">15:00</div>
      <div class="gs-winning" id="gs-winning">Match starting...</div>
    </div>
    <div class="gs-player gs-right">
      <span class="gs-label">ğŸ¤– BOT</span>
      <span class="gs-value" id="gs-bot-val">$10,000.00</span>
      <span class="gs-trades" id="gs-bot-trades">0 trades</span>
      <span class="gs-bots-val">ğŸ“Š P/L: <span id="gs-bot-bots-val" class="mono">$0.00</span></span>
    </div>
  </div>

  <!-- SPLIT PANELS -->
  <div id="game-panels">
    <!-- PLAYER PANEL -->
    <div class="gp-panel gp-player">
      <div class="gp-header gp-header-player">ğŸ‘¤ YOUR TRADES</div>
      <div class="gp-chart" id="gp-player-chart"></div>
      <div class="gp-stats">
        <div class="gp-stat"><span>Balance</span><span id="gp-p-balance" class="mono">$10,000.00</span></div>
        <div class="gp-stat"><span>Holdings</span><span id="gp-p-holdings" class="mono">0</span></div>
        <div class="gp-stat"><span>P/L</span><span id="gp-p-pl" class="mono pnl-zero">$0.00</span></div>
      </div>
      <!-- Tabbed Interface -->
      <div class="gp-tabs">
        <button class="gp-tab active" data-gptab="trade">âš¡ Trade</button>
        <button class="gp-tab" data-gptab="bots">ğŸ¤– Bots</button>
        <button class="gp-tab" data-gptab="portfolio">ğŸ“Š Portfolio</button>
      </div>
      <!-- Trade Tab -->
      <div class="gp-tab-content" id="gp-tab-trade">
        <div class="gp-order-area">
          <div class="gp-side-toggle">
            <button class="gp-side-btn gp-buy-active" id="gp-buy-btn">BUY</button>
            <button class="gp-side-btn" id="gp-sell-btn">SELL</button>
          </div>
          <div class="gp-order-types">
            <button class="gp-ot active" data-type="market">ğŸ”µ Market</button>
            <button class="gp-ot" data-type="limit">ğŸŸ¡ Limit</button>
            <button class="gp-ot" data-type="stop-loss">ğŸ”´ Stop-Loss</button>
            <button class="gp-ot" data-type="take-profit">ğŸŸ¢ Take-Profit</button>
            <button class="gp-ot" data-type="trailing-stop">ğŸŸ  Trailing Stop</button>
          </div>
          <div class="gp-limit-row hidden" id="gp-limit-row">
            <input type="number" id="gp-limit-price" placeholder="Limit price">
          </div>
          <div class="gp-limit-row hidden" id="gp-stop-row">
            <input type="number" id="gp-stop-price" placeholder="Stop price (triggers at this price)">
          </div>
          <div class="gp-limit-row hidden" id="gp-tp-row">
            <input type="number" id="gp-tp-price" placeholder="Take-profit price">
          </div>
          <div class="gp-limit-row hidden" id="gp-trail-row">
            <input type="number" id="gp-trail-pct" placeholder="Trail % (e.g. 1.5)" step="0.1" min="0.1" max="10">
          </div>
          <div class="gp-amount-row">
            <input type="number" id="gp-order-usd" placeholder="Amount (USD)">
          </div>
          <div class="gp-pct-btns">
            <button class="gp-pct" data-pct="25">25%</button>
            <button class="gp-pct" data-pct="50">50%</button>
            <button class="gp-pct" data-pct="75">75%</button>
            <button class="gp-pct" data-pct="100">100%</button>
          </div>
          <button class="primary-btn buy-color" id="gp-place-order">BUY</button>
        </div>
        <div class="gp-trades-log">
          <div class="gp-trades-title">Your Trades</div>
          <div id="gp-p-trades-list" class="gp-trades-list"></div>
        </div>
      </div>
      <!-- Bots Tab -->
      <div class="gp-tab-content hidden" id="gp-tab-bots">
        <div class="gp-player-bots">
          <!-- Scalping Bot -->
          <div class="gp-bot-card" id="pbot-scalp-card">
            <div class="gp-bot-card-header">
              <span class="gp-bot-card-icon">âš¡</span>
              <span class="gp-bot-card-name">Scalping Bot</span>
              <label class="gp-bot-toggle">
                <input type="checkbox" id="pbot-scalp-toggle">
                <span class="gp-bot-toggle-slider"></span>
              </label>
            </div>
            <div class="gp-bot-card-desc">Auto-trades small quick profits</div>
            <div class="gp-bot-card-inputs">
              <div class="gp-bot-input-row">
                <label>Profit Target %</label>
                <input type="number" id="pbot-scalp-profit" value="0.3" min="0.1" max="0.5" step="0.1">
              </div>
              <div class="gp-bot-input-row">
                <label>Trade Size ($)</label>
                <input type="number" id="pbot-scalp-size" value="200" min="50" max="2000" step="50">
              </div>
            </div>
            <div class="gp-bot-card-status" id="pbot-scalp-status">ğŸ’¤ Idle</div>
          </div>
          <!-- Dip Buying Bot -->
          <div class="gp-bot-card" id="pbot-dip-card">
            <div class="gp-bot-card-header">
              <span class="gp-bot-card-icon">ğŸ“‰</span>
              <span class="gp-bot-card-name">Dip Buying Bot</span>
              <label class="gp-bot-toggle">
                <input type="checkbox" id="pbot-dip-toggle">
                <span class="gp-bot-toggle-slider"></span>
              </label>
            </div>
            <div class="gp-bot-card-desc">Buys dips, sells on recovery</div>
            <div class="gp-bot-card-inputs">
              <div class="gp-bot-input-row">
                <label>Dip Threshold %</label>
                <input type="number" id="pbot-dip-threshold" value="1.5" min="0.5" max="5" step="0.5">
              </div>
              <div class="gp-bot-input-row">
                <label>Trade Size ($)</label>
                <input type="number" id="pbot-dip-size" value="300" min="50" max="2000" step="50">
              </div>
            </div>
            <div class="gp-bot-card-status" id="pbot-dip-status">ğŸ’¤ Idle</div>
          </div>
          <!-- Grid Bot -->
          <div class="gp-bot-card" id="pbot-grid-card">
            <div class="gp-bot-card-header">
              <span class="gp-bot-card-icon">ğŸ“Š</span>
              <span class="gp-bot-card-name">Grid Bot</span>
              <label class="gp-bot-toggle">
                <input type="checkbox" id="pbot-grid-toggle">
                <span class="gp-bot-toggle-slider"></span>
              </label>
            </div>
            <div class="gp-bot-card-desc">Auto buy low / sell high in range</div>
            <div class="gp-bot-card-inputs">
              <div class="gp-bot-input-row">
                <label>Range % (from price)</label>
                <input type="number" id="pbot-grid-range" value="2" min="0.5" max="10" step="0.5">
              </div>
              <div class="gp-bot-input-row">
                <label>Trade Size ($)</label>
                <input type="number" id="pbot-grid-size" value="250" min="50" max="2000" step="50">
              </div>
            </div>
            <div class="gp-bot-card-status" id="pbot-grid-status">ğŸ’¤ Idle</div>
          </div>
          <!-- Deploy Real Agents Section -->
          <div class="gp-deploy-section">
            <div class="gp-deploy-header">
              <h4>ğŸš€ Deploy Real Trading Agents</h4>
              <p>Turn game bots into real crypto traders</p>
            </div>
            <div class="gp-deploy-cards">
              <div class="gp-deploy-card" data-bot="scalp">
                <div class="gp-deploy-card-header">
                  <span class="gp-deploy-icon">âš¡</span>
                  <div class="gp-deploy-info">
                    <div class="gp-deploy-name">Scalping Agent</div>
                    <div class="gp-deploy-record">Game Record: <span id="scalp-wins">0</span>W / <span id="scalp-losses">0</span>L</div>
                  </div>
                  <div class="gp-deploy-cost">1,000 ğŸ’</div>
                </div>
                <div class="gp-deploy-options">
                  <label>Deploy with:</label>
                  <select class="gp-deploy-amount">
                    <option value="50">$50 (1,000 ğŸ’)</option>
                    <option value="100">$100 (1,800 ğŸ’)</option>
                    <option value="250">$250 (4,000 ğŸ’)</option>
                    <option value="500">$500 (7,500 ğŸ’)</option>
                  </select>
                </div>
                <button class="gp-deploy-btn" onclick="deployAgent('scalp')">ğŸš€ Deploy Agent</button>
                <div class="gp-deploy-status" id="scalp-agent-status">Not deployed</div>
              </div>
              
              <div class="gp-deploy-card" data-bot="dip">
                <div class="gp-deploy-card-header">
                  <span class="gp-deploy-icon">ğŸ“‰</span>
                  <div class="gp-deploy-info">
                    <div class="gp-deploy-name">Dip Buying Agent</div>
                    <div class="gp-deploy-record">Game Record: <span id="dip-wins">0</span>W / <span id="dip-losses">0</span>L</div>
                  </div>
                  <div class="gp-deploy-cost">1,200 ğŸ’</div>
                </div>
                <div class="gp-deploy-options">
                  <label>Deploy with:</label>
                  <select class="gp-deploy-amount">
                    <option value="50">$50 (1,200 ğŸ’)</option>
                    <option value="100">$100 (2,000 ğŸ’)</option>
                    <option value="250">$250 (4,500 ğŸ’)</option>
                    <option value="500">$500 (8,000 ğŸ’)</option>
                  </select>
                </div>
                <button class="gp-deploy-btn" onclick="deployAgent('dip')">ğŸš€ Deploy Agent</button>
                <div class="gp-deploy-status" id="dip-agent-status">Not deployed</div>
              </div>
              
              <div class="gp-deploy-card" data-bot="grid">
                <div class="gp-deploy-card-header">
                  <span class="gp-deploy-icon">ğŸ“Š</span>
                  <div class="gp-deploy-info">
                    <div class="gp-deploy-name">Grid Trading Agent</div>
                    <div class="gp-deploy-record">Game Record: <span id="grid-wins">0</span>W / <span id="grid-losses">0</span>L</div>
                  </div>
                  <div class="gp-deploy-cost">1,500 ğŸ’</div>
                </div>
                <div class="gp-deploy-options">
                  <label>Deploy with:</label>
                  <select class="gp-deploy-amount">
                    <option value="50">$50 (1,500 ğŸ’)</option>
                    <option value="100">$100 (2,500 ğŸ’)</option>
                    <option value="250">$250 (5,000 ğŸ’)</option>
                    <option value="500">$500 (9,000 ğŸ’)</option>
                  </select>
                </div>
                <button class="gp-deploy-btn" onclick="deployAgent('grid')">ğŸš€ Deploy Agent</button>
                <div class="gp-deploy-status" id="grid-agent-status">Not deployed</div>
              </div>
            </div>
            <div class="gp-deploy-info-box">
              <h5>ğŸ’¡ How it works:</h5>
              <ul>
                <li>Deploy agents with real crypto funds</li>
                <li>Agents trade on Solana DEXs automatically</li>
                <li>Monitor performance in real-time</li>
                <li>Withdraw profits anytime</li>
                <li>Better game performance = higher success rates</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
      <!-- Portfolio Tab -->
      <div class="gp-tab-content hidden" id="gp-tab-portfolio">
        <div class="gp-portfolio">
          <div class="gp-portfolio-summary">
            <div class="gp-port-row"><span>Starting Balance</span><span class="mono">$10,000.00</span></div>
            <div class="gp-port-row"><span>Cash Balance</span><span class="mono" id="gp-port-cash">$10,000.00</span></div>
            <div class="gp-port-row"><span>Holdings Value</span><span class="mono" id="gp-port-holdings">$0.00</span></div>
            <div class="gp-port-row gp-port-total"><span>Total Value</span><span class="mono" id="gp-port-total">$10,000.00</span></div>
            <div class="gp-port-row"><span>Total P/L</span><span class="mono" id="gp-port-pl">$0.00</span></div>
          </div>
          <div class="gp-trades-log">
            <div class="gp-trades-title">All Trades (incl. bots)</div>
            <div id="gp-port-trades-list" class="gp-trades-list"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- DIVIDER -->
    <div class="gp-divider"></div>

    <!-- BOT PANEL -->
    <div class="gp-panel gp-bot">
      <div class="gp-header gp-header-bot">ğŸ¤– BOT TRADES</div>
      <div class="gp-chart" id="gp-bot-chart"></div>
      <div class="gp-stats">
        <div class="gp-stat"><span>Balance</span><span id="gp-b-balance" class="mono">$10,000.00</span></div>
        <div class="gp-stat"><span>Holdings</span><span id="gp-b-holdings" class="mono">0</span></div>
        <div class="gp-stat"><span>P/L</span><span id="gp-b-pl" class="mono pnl-zero">$0.00</span></div>
      </div>
      <div class="gp-bot-strategy" id="gp-bot-strategy-card">
        <div class="gp-strat-indicator">
          <div class="gp-strat-pulse"></div>
          <div class="gp-strat-label">Current Strategy</div>
        </div>
        <div id="gp-bot-strategy-text" class="gp-strat-text">Waiting...</div>
        <div id="gp-bot-strategy-detail" class="gp-strat-detail"></div>
      </div>
      <div class="gp-commentary">
        <div class="gp-trades-title">ğŸ§  Bot Commentary</div>
        <div id="gp-bot-commentary" class="gp-trades-list"></div>
      </div>
      <div class="gp-trades-log">
        <div class="gp-trades-title">Bot Trades</div>
        <div id="gp-b-trades-list" class="gp-trades-list"></div>
      </div>
    </div>
  </div>

  <!-- NOVA GAME CHAT -->
  <div id="nova-game-chat">
    <div class="resize-handle-top" id="nova-game-resize"></div>
    <div id="nova-game-header" onclick="toggleNovaGameChat()">
      <span class="nova-game-header-left">
        <span class="nova-avatar">ğŸ¤–</span>
        <span class="nova-name">Nova</span>
        <span class="nova-status">Match Advisor</span>
      </span>
      <span id="nova-game-toggle">â–²</span>
    </div>
    <div id="nova-game-body">
      <div id="nova-game-messages"></div>
      <div id="nova-game-quick">
        <button class="nova-game-qr" data-q="how-am-i-doing">ğŸ“Š How am I doing?</button>
        <button class="nova-game-qr" data-q="what-bot-doing">ğŸ¤– What's the bot doing?</button>
        <button class="nova-game-qr" data-q="tips-to-win">ğŸ’¡ Tips to win</button>
        <button class="nova-game-qr" data-q="should-i-trade">ğŸ“ˆ Should I buy/sell?</button>
      </div>
      <div id="nova-game-input-row">
        <input type="text" id="nova-game-input" placeholder="Ask Nova about the match...">
        <button id="nova-game-send" class="sm-btn">â¤</button>
      </div>
    </div>
  </div>

  <!-- MATCH STATS TABLE -->
  <div style="padding:12px 20px;border-top:1px solid var(--border);flex-shrink:0;background:var(--bg2)">
    <h3 style="font-size:13px;color:var(--muted);margin-bottom:8px">ğŸ“Š Match Statistics</h3>
    <table style="width:100%;border-collapse:collapse;font-size:11px">
      <thead><tr><th style="text-align:left;padding:4px 8px;color:var(--muted);border-bottom:1px solid var(--border)">Metric</th><th style="padding:4px 8px;color:#4aa3ff;border-bottom:1px solid var(--border)">You</th><th style="padding:4px 8px;color:#ff6b35;border-bottom:1px solid var(--border)">Bot</th></tr></thead>
      <tbody>
        <tr><td style="padding:4px 8px">Trades</td><td style="padding:4px 8px;text-align:center" id="ms-player-trades">0</td><td style="padding:4px 8px;text-align:center" id="ms-bot-trades">0</td></tr>
        <tr><td style="padding:4px 8px">Avg Trade Size</td><td style="padding:4px 8px;text-align:center" id="ms-player-avg">$0</td><td style="padding:4px 8px;text-align:center" id="ms-bot-avg">$0</td></tr>
        <tr><td style="padding:4px 8px">Holdings Value</td><td style="padding:4px 8px;text-align:center" id="ms-player-hold">$0</td><td style="padding:4px 8px;text-align:center" id="ms-bot-hold">$0</td></tr>
      </tbody>
    </table>
  </div>

  <!-- CLOSE BUTTON -->
  <button id="game-close-btn" onclick="exitGame()">âœ• EXIT MATCH</button>

  <!-- ORDER FLOW ACADEMY -->
  <div class="ofa-section" id="order-flow-academy">
    <h2>ğŸ“Š Order Flow Academy</h2>
    <h3>ğŸ” What is Order Flow?</h3>
    <ul class="ofa-intro">
      <li>Order flow shows <strong>real-time buying and selling pressure</strong></li>
      <li>It reveals who is buying (bulls ğŸ‚) and who is selling (bears ğŸ»)</li>
      <li>Unlike candlestick charts, order flow shows the <strong>VOLUME</strong> behind each price move</li>
    </ul>

    <h3>ğŸ“š Key Concepts</h3>
    <div class="ofa-cards" id="ofa-concepts-grid">
      <div class="ofa-card"><h4>1. Bid vs Ask</h4><p>Bids are buy orders waiting, Asks are sell orders waiting. The spread between them shows liquidity. Tight spreads = liquid market, wide spreads = illiquid.</p></div>
      <div class="ofa-card"><h4>2. Market Orders vs Limit Orders</h4><p>Market orders hit immediately (aggressive), limit orders wait (passive). Aggressive buying = bullish signal. Aggressive selling = bearish signal.</p></div>
      <div class="ofa-card"><h4>3. Volume Profile</h4><p>Shows how much volume traded at each price level. High volume = strong support/resistance. Low volume = price moves quickly through these areas.</p></div>
      <div class="ofa-card"><h4>4. Delta (Buy-Sell Imbalance)</h4><p>Delta = Buy volume - Sell volume. Positive delta = more buyers, negative = more sellers. Large delta spikes signal aggressive directional moves.</p></div>
      <div class="ofa-card"><h4>5. Footprint Charts</h4><p>Shows exact buy/sell volume at each price level within a candle. Reveals hidden buying/selling that regular charts can't show.</p></div>
    </div>
    <div class="ofa-cards">
      <div class="ofa-card"><h4>6. Cumulative Delta</h4><p>Running total of delta over time. Rising = sustained buying pressure, falling = sustained selling. Divergence from price = potential reversal.</p></div>
      <div class="ofa-card"><h4>7. Order Book Depth</h4><p>Visual representation of all pending orders. Large walls = potential support/resistance. But beware â€” walls can be spoofed!</p></div>
      <div class="ofa-card"><h4>8. Absorption</h4><p>When large limit orders "absorb" aggressive market orders without price moving. Sign of strong support/resistance. Institutional players defending levels.</p></div>
      <div class="ofa-card"><h4>9. Exhaustion</h4><p>When heavy buying fails to push price up (or heavy selling fails to push down). Classic reversal signal. Watch for exhaustion at key levels.</p></div>
      <div class="ofa-card"><h4>10. Iceberg Orders</h4><p>Large hidden orders that only show small amounts. Institutional players use these to hide their true size. Detected by repeated fills at same price.</p></div>
    </div>

    <h3>ğŸ“¡ Live Order Flow Visualization</h3>
    <div class="ofa-controls">
      <label class="ofa-toggle-label">
        <input type="checkbox" id="live-orderflow-toggle" onchange="toggleLiveOrderFlow(this.checked)">
        <span class="ofa-toggle-slider"></span>
        <span class="ofa-toggle-text">ğŸŒŠ Connect to Live Kraken Data</span>
      </label>
      <div class="ofa-toggle-info">
        <small>ğŸŸ¡ Demo: Simulated order flow â€¢ ğŸŸ¢ Live: Real Kraken WebSocket data</small>
      </div>
    </div>
    <div class="ofa-live-row">
    <div class="ofa-ladder" id="ofa-ladder">
      <div class="ofa-ladder-title">
        <span>ğŸŸ¢ Bids (Buyers)</span>
        <span>Price Ladder</span>
        <span>ğŸ”´ Asks (Sellers)</span>
      </div>
      <div id="ofa-ladder-rows"></div>
      <div class="ofa-delta-box" id="ofa-delta-box">
        Delta: <span id="ofa-delta-val">0</span>
      </div>
    </div>

    <div class="nova-academy-chat" id="nova-academy-chat">
      <div class="nova-academy-header" onclick="toggleNovaAcademy()">
        <span class="nova-game-header-left">
          <span class="nova-avatar">ğŸ“</span>
          <span><span class="nova-name">Nova</span> <span class="nova-status">Academy Chat</span></span>
        </span>
        <span id="nova-academy-toggle">â–²</span>
      </div>
      <div id="nova-academy-body">
        <div id="nova-academy-messages" class="nova-academy-msgs">
          <div class="mentor-msg bot">Welcome to the Order Flow Academy! ğŸ“ Ask me anything about order flow, indicators, reading the price ladder, or trading strategies. I remember what we've talked about in other chats too!</div>
        </div>
        <div class="nova-academy-quick">
          <button class="nova-game-qr" onclick="sendNovaAcademyQuick('Explain delta')">ğŸ“Š Explain Delta</button>
          <button class="nova-game-qr" onclick="sendNovaAcademyQuick('How to read the ladder')">ğŸ“¡ Read Ladder</button>
          <button class="nova-game-qr" onclick="sendNovaAcademyQuick('What is VWAP')">ğŸ“ˆ What is VWAP</button>
          <button class="nova-game-qr" onclick="sendNovaAcademyQuick('Best order flow strategy')">ğŸ¯ Best Strategy</button>
        </div>
        <div class="nova-academy-input-row">
          <input type="text" id="nova-academy-input" placeholder="Ask about order flow...">
          <button class="sm-btn" id="nova-academy-send">â¤</button>
        </div>
      </div>
    </div>
    </div><!-- end ofa-live-row -->

    <h3>ğŸ“ˆ Key Indicators</h3>
    <div class="ofa-cards">
      <div class="ofa-card"><h4>VWAP (Volume Weighted Avg Price)</h4><p>Average price weighted by volume. Price above VWAP = bullish, below = bearish. Institutional benchmark â€” they aim to execute at or better than VWAP.</p></div>
      <div class="ofa-card"><h4>CVD (Cumulative Volume Delta)</h4><p>Divergence between price and CVD signals potential reversals. Price rising + CVD falling = hidden selling. Price falling + CVD rising = hidden buying.</p></div>
      <div class="ofa-card"><h4>POC (Point of Control)</h4><p>Price level with highest traded volume. Acts as a magnet for price. Price tends to revisit POC â€” powerful for mean-reversion strategies.</p></div>
      <div class="ofa-card"><h4>Value Area (VA High/Low)</h4><p>Range where 70% of volume traded. Price outside VA = potential mean reversion back inside. Breakout from VA with volume = trend continuation.</p></div>
      <div class="ofa-card"><h4>Imbalance Stacking</h4><p>Multiple consecutive price levels with buy/sell imbalance. Strong directional signal. 3+ stacked imbalances = high probability continuation.</p></div>
    </div>
  </div>
</div>

<!-- MATCH END MODAL -->
<div id="match-end-overlay" class="hidden">
  <div class="match-end-modal">
    <div id="match-end-confetti"></div>
    <h2 id="match-winner-text">ğŸ† YOU WIN!</h2>
    <div class="match-end-scores">
      <div class="me-score me-player">
        <div class="me-label">ğŸ‘¤ You</div>
        <div class="me-val" id="me-player-val">$10,000.00</div>
        <div class="me-pl" id="me-player-pl">+$0.00</div>
      </div>
      <div class="me-vs">VS</div>
      <div class="me-score me-bot">
        <div class="me-label">ğŸ¤– Bot</div>
        <div class="me-val" id="me-bot-val">$10,000.00</div>
        <div class="me-pl" id="me-bot-pl">+$0.00</div>
      </div>
    </div>
    <div class="match-end-stats" id="match-end-stats"></div>
    <div class="match-end-share">
      <button class="primary-btn share-match-btn" onclick="openShareModal('match')">ğŸ“¤ SHARE RESULT</button>
      <button class="primary-btn challenge-friend-btn" onclick="openShareModal('challenge')">âš”ï¸ CHALLENGE A FRIEND</button>
    </div>
    <div class="match-end-btns">
      <button class="primary-btn" style="background:var(--accent)" onclick="playAgain()">ğŸ”„ PLAY AGAIN</button>
      <button class="primary-btn" style="background:var(--bg3)" onclick="exitGame()">ğŸ  BACK TO MAIN</button>
    </div>
  </div>
</div>

<!-- ACHIEVEMENT POPUP CONTAINER -->
<div id="achievement-popup-container"></div>

<!-- ACHIEVEMENTS PANEL -->
<div id="achievements-overlay" class="hidden" onclick="TokenEconomy.toggleAchievements()">
  <div id="achievements-panel" onclick="event.stopPropagation()">
    <div class="ap-header">
      <h2>ğŸ† Achievements</h2>
      <div class="ap-total">Total Earned: <span id="ap-total-earned" class="mono">0</span> ğŸ’</div>
      <button class="settings-close" onclick="TokenEconomy.toggleAchievements()">âœ•</button>
    </div>
    <div id="achievements-grid"></div>
  </div>
</div>

<!-- SHOP MODAL -->
<div id="shop-overlay" class="hidden" onclick="TokenEconomy.toggleShop()">
  <div id="shop-panel" onclick="event.stopPropagation()">
    <div class="ap-header">
      <h2>ğŸ›’ Premium Shop</h2>
      <div class="ap-total">Balance: <span id="shop-balance" class="mono">0</span> ğŸ’</div>
      <button class="settings-close" onclick="TokenEconomy.toggleShop()">âœ•</button>
    </div>
    <div id="shop-items"></div>
  </div>
</div>

<!-- TRANSACTION HISTORY PANEL -->
<div id="txn-overlay" class="hidden" onclick="TokenEconomy.toggleTransactions()">
  <div id="txn-panel" onclick="event.stopPropagation()">
    <div class="ap-header">
      <h2>ğŸ“œ Transaction History</h2>
      <button class="settings-close" onclick="TokenEconomy.toggleTransactions()">âœ•</button>
    </div>
    <div id="txn-filters">
      <button class="txn-filter active" data-filter="all" onclick="TokenEconomy.filterTxns('all',this)">All</button>
      <button class="txn-filter" data-filter="earned" onclick="TokenEconomy.filterTxns('earned',this)">Earned</button>
      <button class="txn-filter" data-filter="spent" onclick="TokenEconomy.filterTxns('spent',this)">Spent</button>
    </div>
    <div id="txn-list"></div>
  </div>
</div>

<!-- HELP CENTER MODAL -->
<div id="help-center" class="modal-overlay hidden" onclick="if(event.target===this)toggleHelpCenter()">
  <div class="help-modal">
    <div class="help-header">
      <h2>â“ Help Center</h2>
      <input type="text" id="help-search" placeholder="Search help..." oninput="filterHelp(this.value)">
      <button class="settings-close" onclick="toggleHelpCenter()">âœ•</button>
    </div>
    <div class="help-content">
      <div class="help-section" data-search="getting started first trade begin">
        <h3>ğŸš€ Getting Started</h3>
        <p>Welcome to <strong>Incentives Crypto Games</strong> â€” a competitive trading game where you learn real trading skills!</p>
        <ul>
          <li><strong>Starting balance:</strong> $10,000 in game money to practice with</li>
          <li><strong>Make a trade:</strong> Select a pair from the dropdown, set buy/sell, choose amount, click Place Order</li>
          <li><strong>Chart:</strong> Shows live price action. Use timeframe buttons (1m, 5m, 15m, 1h, 4h, 1d)</li>
          <li><strong>Trading bots:</strong> Set up Grid or DCA bots to trade automatically</li>
          <li><strong>INCENTIVES tokens:</strong> Earn by learning, winning, and completing achievements</li>
        </ul>
      </div>
      <div class="help-section" data-search="earn incentives tokens rewards achievements learn">
        <h3>ğŸ’° How to Earn INCENTIVES</h3>
        <p>You start with <strong>500 INCENTIVES</strong> as a welcome bonus. Earn more by:</p>
        <table class="help-table">
          <tr><th>Achievement</th><th>Reward</th></tr>
          <tr><td>Place your first trade</td><td>+10 ğŸ’</td></tr>
          <tr><td>Complete 5 trades</td><td>+25 ğŸ’</td></tr>
          <tr><td>Complete 20 trades</td><td>+50 ğŸ’</td></tr>
          <tr><td>Use all order types (market, limit, stop-loss)</td><td>+30 ğŸ’</td></tr>
          <tr><td>Set up a trading bot</td><td>+20 ğŸ’</td></tr>
          <tr><td>Ask the Mentor 10 questions</td><td>+15 ğŸ’</td></tr>
          <tr><td>Play first bot challenge</td><td>+20 ğŸ’</td></tr>
          <tr><td>Win first bot challenge</td><td>+50 ğŸ’</td></tr>
          <tr><td>Beat bot on Easy</td><td>+25 ğŸ’</td></tr>
          <tr><td>Beat bot on Medium</td><td>+75 ğŸ’</td></tr>
          <tr><td>Beat bot on Hard</td><td>+200 ğŸ’</td></tr>
        </table>
        <p><strong>Bonus:</strong> First win each day = 2x rewards! Win by 10%+ margin = extra 50 ğŸ’</p>
      </div>
      <div class="help-section" data-search="competition multiplayer entry fee prize pool burn">
        <h3>ğŸ† How Competitions Work</h3>
        <ul>
          <li><strong>Bot Challenge:</strong> Press "Challenge the Bot" â€” split screen, you vs AI. Beat it to earn INCENTIVES!</li>
          <li><strong>Difficulty:</strong> Easy / Medium / Hard â€” harder = bigger rewards</li>
          <li><strong>Entry Fees:</strong> Casual (50 ğŸ’) | Ranked (100 ğŸ’) | Tournament (250 ğŸ’)</li>
          <li><strong>Prize Pool:</strong> Total entries Ã— fee. Winners take 85% (5% burned ğŸ”¥, 10% platform fee)</li>
          <li><strong>Tournament splits:</strong> 1st: 60% | 2nd: 25% | 3rd: 15%</li>
          <li><strong>ğŸ”¥ Burn Rate:</strong> 5% of every entry fee is permanently destroyed, reducing total supply over time</li>
        </ul>
        <p><strong>Total INCENTIVES Burned:</strong> <span id="total-burned" class="mono">0</span> ğŸ”¥</p>
      </div>
      <div class="help-section" data-search="wallet connect solana phantom">
        <h3>ğŸ”— Wallet Guide</h3>
        <ul>
          <li>Click <strong>"Connect Wallet"</strong> in the top bar</li>
          <li>Supported wallets: Phantom, Solflare, Backpack</li>
          <li>Once connected, your INCENTIVES balance syncs with your Solana wallet</li>
          <li>Competition winnings are sent directly to your wallet</li>
          <li>View your transactions in the wallet dropdown â†’ Transaction History</li>
        </ul>
      </div>
      <div class="help-section" data-search="trading basics market limit stop loss order">
        <h3>ğŸ“Š Trading Basics</h3>
        <ul>
          <li><strong>Market Order:</strong> Buy/sell immediately at current price</li>
          <li><strong>Limit Order:</strong> Set a price â€” order fills when market reaches it</li>
          <li><strong>Stop-Loss:</strong> Auto-sell if price drops to protect from big losses</li>
          <li><strong>Candlestick Charts:</strong> Green = price went up, Red = price went down. Body = open/close, Wicks = high/low</li>
          <li><strong>Grid Trading:</strong> Bot places buy orders below price and sell orders above, profiting from bounces</li>
          <li><strong>Scalping:</strong> Quick trades capturing small price movements (0.5-2%)</li>
          <li><strong>DCA (Dollar Cost Average):</strong> Buy fixed amounts at regular intervals to smooth out entry price</li>
        </ul>
      </div>
      <div class="help-section" data-search="trading bots grid dca setup">
        <h3>ğŸ¤– Trading Bots</h3>
        <ul>
          <li><strong>Grid Bot:</strong> Set upper/lower price range + number of grids. Bot auto-buys low, sells high within range</li>
          <li><strong>DCA Bot:</strong> Set interval + amount. Bot buys automatically on schedule</li>
          <li>View active bots and their P/L in the bots panel</li>
          <li>Stop any bot anytime with the stop button</li>
        </ul>
      </div>
      <div class="help-section" data-search="shop premium features unlock">
        <h3>ğŸ›’ Premium Shop</h3>
        <ul>
          <li><strong>Advanced Indicators (200 ğŸ’):</strong> Unlock RSI, MACD, Bollinger Bands</li>
          <li><strong>Extra Pairs (150 ğŸ’):</strong> Additional trading pairs</li>
          <li><strong>Extreme Bot (500 ğŸ’):</strong> Hardest bot difficulty</li>
          <li><strong>Neon Theme (100 ğŸ’):</strong> Cyberpunk-style theme</li>
          <li><strong>Gold Theme (100 ğŸ’):</strong> Luxurious gold accents</li>
        </ul>
      </div>
      <div class="help-section" data-search="ai mentor chat nova telegram voice">
        <h3>ğŸ“ AI Mentor (Nova)</h3>
        <ul>
          <li>Chat with <strong>Nova</strong> in the bottom-right chat box</li>
          <li>Ask about any trading concept, market analysis, or game feature</li>
          <li>Nova gives proactive tips when you trade or when markets move big</li>
          <li>Quick buttons: Market Analysis, Trading Tips, Explain My P/L, What's Hot?</li>
          <li><strong>Telegram:</strong> Connect on Telegram for mobile access â€” learn on the go!</li>
          <li><strong>Voice:</strong> Coming soon!</li>
        </ul>
      </div>
      <div class="help-section" data-search="faq questions answers">
        <h3>â“ FAQ</h3>
        <dl class="faq-list">
          <dt>Is this real money?</dt>
          <dd>No â€” game money ($10,000) is fake. But INCENTIVES tokens are real crypto on Solana.</dd>
          <dt>How do I get more INCENTIVES?</dt>
          <dd>Earn through achievements, winning bot challenges, and learning. Or buy on a Solana DEX.</dd>
          <dt>Can I lose my INCENTIVES?</dt>
          <dd>Only by entering competitions (entry fees) or buying shop items. You can't lose them from game trading.</dd>
          <dt>Is the AI Mentor free?</dt>
          <dd>Yes! Nova is free for all players, in-game and on Telegram.</dd>
          <dt>What happens if I reset my balance?</dt>
          <dd>Your game money resets to $10,000. Your INCENTIVES tokens stay.</dd>
          <dt>What's the burn rate?</dt>
          <dd>5% of every competition entry fee is permanently burned ğŸ”¥, reducing total supply over time.</dd>
          <dt>Can I play without INCENTIVES?</dt>
          <dd>Yes! Practice mode, learning, and bot challenges are free. Competitive multiplayer requires INCENTIVES.</dd>
          <dt>Which wallets are supported?</dt>
          <dd>Phantom, Solflare, and Backpack on Solana.</dd>
          <dt>How do I earn the most INCENTIVES?</dt>
          <dd>Beat the bot on Hard difficulty daily for 2x rewards + margin bonus.</dd>
          <dt>Will there be multiplayer?</dt>
          <dd>Yes! Leaderboards, 1v1, team battles, and 5-player co-op are coming soon.</dd>
        </dl>
      </div>
      <div class="help-section" data-search="keyboard shortcuts hotkeys">
        <h3>âŒ¨ï¸ Keyboard Shortcuts</h3>
        <table class="help-table">
          <tr><td><kbd>B</kbd></td><td>Switch to Buy</td></tr>
          <tr><td><kbd>S</kbd></td><td>Switch to Sell</td></tr>
          <tr><td><kbd>1-6</kbd></td><td>Change timeframe</td></tr>
          <tr><td><kbd>Esc</kbd></td><td>Close modals</td></tr>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- SHARE MODAL -->
<div id="share-overlay" class="modal-overlay hidden" onclick="if(event.target===this)closeShareModal()">
  <div class="share-modal" onclick="event.stopPropagation()">
    <div class="share-header">
      <h2 id="share-modal-title">ğŸ“¤ Share</h2>
      <button class="settings-close" onclick="closeShareModal()">âœ•</button>
    </div>
    <div id="share-preview" class="share-preview"></div>
    <div class="share-buttons">
      <button class="share-platform-btn share-twitter" onclick="shareGame('twitter')">
        <span class="share-icon">ğ•</span><span>Twitter / X</span>
      </button>
      <button class="share-platform-btn share-facebook" onclick="shareGame('facebook')">
        <span class="share-icon">f</span><span>Facebook</span>
      </button>
      <button class="share-platform-btn share-telegram" onclick="shareGame('telegram')">
        <span class="share-icon">âœˆ</span><span>Telegram</span>
      </button>
      <button class="share-platform-btn share-discord" onclick="shareGame('discord')">
        <span class="share-icon">ğŸ®</span><span>Discord</span>
      </button>
      <button class="share-platform-btn share-snapchat" onclick="shareGame('snapchat')">
        <span class="share-icon">ğŸ‘»</span><span>Snapchat</span>
      </button>
      <button class="share-platform-btn share-github" onclick="shareGame('github')">
        <span class="share-icon">âš™</span><span>GitHub</span>
      </button>
    </div>
    <div class="share-copy-row">
      <input type="text" id="share-copy-text" readonly>
      <button class="share-copy-btn" onclick="copyShareText()">ğŸ“‹ Copy</button>
    </div>
    <div id="share-toast" class="share-toast hidden">âœ… Copied to clipboard!</div>
  </div>
</div>

<!-- SECTION A: MARKET OVERVIEW -->
<div class="page-section" id="market-overview-section">
  <h2>ğŸ“Š Market Overview</h2>
  <div class="market-grid" id="market-overview-grid"></div>
</div>

<!-- SECTION B: PERFORMANCE STATS -->
<div class="page-section" id="perf-stats-section">
  <h2>ğŸ“ˆ Performance Stats</h2>
  <div class="stats-grid">
    <div class="stat-card"><div class="sc-value" id="stat-total-trades">0</div><div class="sc-label">Total Trades</div></div>
    <div class="stat-card"><div class="sc-value" id="stat-win-rate">0%</div><div class="sc-label">Win Rate</div></div>
    <div class="stat-card"><div class="sc-value" id="stat-best-trade">$0.00</div><div class="sc-label">Best Trade</div></div>
    <div class="stat-card"><div class="sc-value" id="stat-total-pl">$0.00</div><div class="sc-label">Total P/L</div></div>
  </div>
</div>

<!-- SECTION C: LEADERBOARD -->
<div class="page-section" id="leaderboard-section">
  <h2>ğŸ† Leaderboard</h2>
  <div class="leaderboard-placeholder">
    <p style="font-size:24px;margin-bottom:8px">ğŸ†</p>
    <p>Leaderboard coming soon!</p>
    <p style="font-size:11px;margin-top:4px">Compete against other players and climb the ranks.</p>
  </div>
</div>

<!-- SECTION D: TRADING ACADEMY -->
<div class="page-section" id="academy-section">
  <h2>ğŸ“ Trading Academy</h2>
  <div class="tip-grid">
    <div class="tip-card"><h3>ğŸ“‰ Buy the Dip</h3><p>When prices drop sharply, it can be a buying opportunity. Use limit orders below market price and let the market come to you.</p></div>
    <div class="tip-card"><h3>ğŸ›¡ï¸ Risk Management</h3><p>Never risk more than 2-5% of your portfolio on a single trade. Always use stop-loss orders to protect your downside.</p></div>
    <div class="tip-card"><h3>ğŸ“Š Read the Chart</h3><p>Candlestick patterns tell a story. Green candles = bullish, red = bearish. Long wicks show rejection. Learn to spot support & resistance.</p></div>
    <div class="tip-card"><h3>ğŸ¤– Use Bots Wisely</h3><p>Grid bots work best in ranging markets. DCA bots smooth out entry prices over time. Don't set and forget â€” monitor performance.</p></div>
  </div>
</div>

<!-- FLOATING RADIO BUTTON -->
<div id="radio-float-btn" onclick="toggleRadioPopup()" title="Market Radio">ğŸ“»</div>
<div id="radio-popup" class="hidden">
  <div class="radio-popup-header">
    <span>ğŸ“» Market Radio</span>
    <button class="radio-popup-close" onclick="toggleRadioPopup()">âœ•</button>
  </div>
  <div class="radio-popup-controls">
    <div class="radio-popup-row">
      <span>Power</span>
      <button id="radio-toggle" class="radio-toggle-btn" onclick="toggleRadio()">OFF</button>
    </div>
    <div class="radio-popup-row">
      <span>Volume</span>
      <input type="range" min="0" max="100" value="50" class="vol-slider" id="radio-vol">
      <button id="radio-mute" class="sm-btn">ğŸ”Š</button>
    </div>
  </div>
  <div class="radio-ticker-wrap" id="market-radio">
    <div class="radio-ticker" id="radio-ticker">INCENTIVES MARKET RADIO â€” Tune in for live updates...</div>
  </div>
  <button class="radio-news-btn" onclick="openNewsModal()">ğŸ“° News</button>
</div>

<!-- Bug-Proof Foundation (Load First) -->
<script src="bug-proof-core.js"></script>
<!-- Credits System (Economic Engine) -->  
<script src="credits-system.js"></script>
<!-- Balance Fix (Connects credits to existing game) -->
<script src="balance-fix.js"></script>
<!-- Main Game Code -->
<script src="app.js"></script>

<!-- Development Tools Panel (Hidden by default) -->
<div id="dev-tools-panel" class="hidden" style="position: fixed; bottom: 80px; right: 20px; z-index: 10000; background: var(--bg2); border: 1px solid var(--border); border-radius: 10px; padding: 12px; max-width: 250px;">
  <div style="font-size: 11px; font-weight: 700; color: var(--text); margin-bottom: 8px;">ğŸ›¡ï¸ Self-Healing Tools</div>
  <div style="display: flex; flex-direction: column; gap: 4px;">
    <button onclick="runHealthCheck()" style="padding: 4px 8px; font-size: 10px; background: var(--accent); color: white; border: none; border-radius: 4px; cursor: pointer;">Health Check</button>
    <button onclick="runAutoFixDemo()" style="padding: 4px 8px; font-size: 10px; background: var(--green); color: white; border: none; border-radius: 4px; cursor: pointer;">Demo Auto-Fix</button>
    <button onclick="runFullTests()" style="padding: 4px 8px; font-size: 10px; background: var(--red); color: white; border: none; border-radius: 4px; cursor: pointer;">Run All Tests</button>
    <button onclick="toggleDevTools()" style="padding: 4px 8px; font-size: 10px; background: var(--muted); color: white; border: none; border-radius: 4px; cursor: pointer;">Close</button>
  </div>
</div>

<!-- Dev Tools Toggle Button -->
<button id="dev-tools-toggle" onclick="toggleDevTools()" style="position: fixed; bottom: 20px; right: 80px; z-index: 9999; width: 48px; height: 48px; border-radius: 50%; background: linear-gradient(135deg, #2a2a2a, #1a1a1a); border: 2px solid #333; color: #00ff41; font-size: 20px; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,.5);">ğŸ› ï¸</button>

<script>
// Radio popup toggle
function toggleRadioPopup() {
  document.getElementById('radio-popup').classList.toggle('hidden');
  document.getElementById('radio-float-btn').classList.toggle('radio-active');
}

// Development tools functions
function toggleDevTools() {
  const panel = document.getElementById('dev-tools-panel');
  panel.classList.toggle('hidden');
}

function runHealthCheck() {
  if (window.SelfHealingDemo) {
    window.SelfHealingDemo.demonstrateHealthCheck();
    showNotification('ğŸ” Health check completed - see console', 'info');
  } else {
    showNotification('âš ï¸ Self-healing system not ready', 'warning');
  }
}

function runAutoFixDemo() {
  if (window.SelfHealingDemo) {
    window.SelfHealingDemo.demonstrateAutoFix();
    showNotification('ğŸ”¨ Auto-fix demo started - see console', 'success');
  } else {
    showNotification('âš ï¸ Self-healing system not ready', 'warning');  
  }
}

function runFullTests() {
  if (window.SelfHealingDemo) {
    window.SelfHealingDemo.runAllTests();
    showNotification('ğŸ§ª Running full test suite - see console', 'info');
  } else {
    showNotification('âš ï¸ Self-healing system not ready', 'warning');
  }
}

// Auto-hide dev tools in production
if (window.location.hostname !== 'localhost' && window.location.hostname !== '127.0.0.1') {
  document.getElementById('dev-tools-toggle').style.display = 'none';
}
</script>
</body>
</html>
